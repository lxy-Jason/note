### 进程

程序的一次执行过程,是一个动态概念,是程序在执行过程中分配和管理资源的基本单位

### 线程

CPU调度的和分派的基本单位,它可与同属一个进程的其他线程共享进程所拥有的全部资源

### 理解

进程可以理解成正在执行的应用程序

线程可以理解成我们应用程序中的代码执行器

所以线程是跑在进程中的,一个进程可能有多个线程,但一个线程只能隶属于一个进程

### 浏览器进程(chrome)

主要有四个:

- 浏览器进程(Browser Process):负责浏览器tab页的前进,后退,地址栏工作和处理浏览器的一些不可见的底层操作,比如网络请求和文件访问
- 渲染进程(Renderer Process):负责一个Tab内显示相关的工作,也称渲染引擎
- 插件进程(Plugin Rrocess):负责控制网页使用到的插件
- GPU进程(GPU Process):负责处理整个应用程序的GPU任务

#### 四个进程之间的关系

当我们在浏览器的地址栏中输入URL,这个时候浏览器进程会向这个URL发送请求,获取到返回的html内容后

将html交给渲染进程解析html,解析中碰到需要请求网络资源又返回来交给浏览器进程加载

同时通知浏览器进程需要插件进程加载插件资源,执行插件代码

解析完毕之后,渲染进程计算得到图像帧,并将这些图像帧交给GPU进程

GPU进程将其转成图像显示在屏幕上

### 多进程架构的好处

#### 1.更高的容错率

因为浏览器访问的页面来自不同的开发者,因为各种原因出现各种bug,而其中一些bug可能会导致渲染引擎直接崩溃

多进程的架构使得每个渲染引擎运行在各自的进程中,相互之间不受影响

当其中一个崩溃之后不会影响到其他页面

#### 2.更高的安全性和沙盒性

同样是因为Internet中存在很多不可信或者说恶意的代码

这些恶意的代码可能会利用一些漏洞窃取信息或者安装恶意软件

浏览器对不同进程限制不同的权限,并提供沙盒运行环境,使其更安全可靠

#### 3.更高的响应速度

单进程的架构各个任务相互竞争抢夺CPU资源,会影响浏览器响应速度

而多进程架构就避免了这个问题

### 浏览器进程中的线程

- UI thread : 控制浏览器上的按钮及输入框
- network thread : 处理网络请求,获取数据
- storage thread : 控制文件等访问

### 渲染进程中的线程

- mian thread : 主线程,解析html,css,加载执行js,布局(生成渲染树),绘制(生成绘画记录)
- work thread : 工作线程(多个)
- compositor thread : 合成器线程,将页面中不同层合并成一个页面
- raster thread : 光栅化线程(多个)

绘画记录是记录各元素绘制的先后顺序,到这里还没有将页面呈现出来

光栅化:把文档结构,元素样式,几何关系,绘画顺序等信息,转变成显示器中的像素,这个转变的过程叫作光栅化

css中添加的will-change属性的元素独自一层

