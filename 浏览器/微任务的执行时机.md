**微任务队列是放在全局执行上下文中的**

**微任务添加到微任务队列，宏任务被添加到消息队列。**

**task queue == macrotask queue != microtask queue**

等全局环境中的代码也执行完成，**这段代码就即将要完成了。V8 将要销毁这段代码的环境对象。这里就是 V8 执行微任务的一个检查点。**

所以是**在主函数执行结束之后、当前宏任务结束之前**执行微任务

**等到微任务执行完毕,当前宏任务才算完成**

之后会去消息队列查看是否还有宏任务,如果有,取出依次执行

