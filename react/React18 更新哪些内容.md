## 自动批处理以减少渲染

### 什么是批处理

React将多个状态更新分组到单个重新渲染中以获得更好的性能

例如，如果你在同一个点击事件中有两个状态更新，React 总是将它们批处理到一个重新渲染中

这样避免了不必要的重新渲染

例如餐厅服务员在你选择第一道菜时不会跑到厨房，而是等你完成订单

在 React 18 之前，我们只在 React 事件处理程序期间批量更新。默认情况下，React 中不会对 promise、setTimeout、本机事件处理程序或任何其他事件中的更新进行批处理。

### 自动批处理

从 React 18 开始createRoot，所有更新都将自动批处理，无论它们来自何处。

这意味着promise、setTimeout、本机事件处理程序或任何其他事件内的更新将以与 React 事件内的更新相同的方式进行批处理。

批处理是安全的，但某些代码可能依赖于在状态更改后立即从 DOM 中读取某些内容。对于这些用例，你可以使用ReactDOM.flushSync()选择退出批处理

[(93条消息) 关于React18更新的几个新功能，你需要了解下_前端达人的博客-CSDN博客](https://blog.csdn.net/Ed7zgeE9X/article/details/118004477#:~:text=关于React18更新的几个新功能，你需要了解下 1 1、自动批处理以减少渲染 什么是批处理？ 批处理是 React将多个状态更新分组到单个重新渲染中以获得更好的性能。 例如，如果你在同一个点击事件中有两个状态更新，React 总是将它们分批处理到一个重新渲染中。,并将其发送给客户端作为响应 ... 3 3、startTransition 什么是过渡？ 我们将状态更新分为两类： 紧急更新反应直接交互，如打字、悬停、拖动等。 )