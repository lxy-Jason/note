### XSS(跨域脚本攻击)Cross Site Script Attack

用户注入恶意js脚本,被浏览器执行导致安全问题

#### 防范措施

1. 输入过滤,前后端都需要进行过滤,因为前端过滤可能会被绕过直接发起请求

   过滤`onerror,onclick`等事件,style,script,iframe标签

2. 符号转义,在输出的地方将构成html元素的符号进行转义,如</>

3. 设置cookie的HttpOnly属性,禁止js读取cookie

4. 重要操作添加验证码,避免脚本冒充用户

5. 使用SCP(内容安全策略)强大的 CSP 可以禁用潜在有害的内联代码执行，并限制从中加载外部资源的域

### CSRF(跨站请求伪造)Cross-site request forgery

攻击者诱导受害者进入第三方网站，在第三方网站中，向被攻击网站发送跨站请求。利用受害者在被攻击网站已经获取的注册凭证，绕过后台的用户验证，达到冒充用户对被攻击的网站执行某项操作的目的。

#### 防范措施

1. 同源检测,CSRF大多数来自第三方网站,直接禁止第三方网站对我们的网站发起请求,通过检测请求头中的Origin和Referer字段可以知道请求来源

2. CSRF Token,服务器生成的一个随机字符串,将其植入返回的页面中,隐藏在表单中,当浏览器发起重要请求时要携带这个Token,服务器进行验证

   从第三方网站发起的请求是拿不到这个Token的

3. 同样是隐藏token,将token放在请求头中,第三方网站也是拿不到

4. 给Cookie设置SameSite属性,如果是第三方网站发起的请求,Cookie设置了SameSite=strict,那么浏览器发起的请求就不会携带cookie,这个和上面同源检测是一个道理

### 点击劫持

将目标网站通过`iframe`嵌入到自己网站,然后让iframe透明不可见,用户在不知情的情况下对目标网站进行了操作

#### 防范措施

1. 在http中添加`x-frame-options`属性,此属性控制页面是否可以被嵌套在`iframe`中
2. 判断当前网站是否被iframe嵌套

### SQL注入攻击

SQL注入攻击是一种常见的网络安全漏洞，它利用了应用程序对用户输入数据的不正确处理，使攻击者能够执行恶意的SQL查询或命令。

SQL注入攻击的原理是通过在应用程序的输入参数中插入恶意的SQL代码片段，从而改变应用程序对数据库的查询逻辑。攻击者可以通过这种方式绕过应用程序的身份验证、访问敏感数据、修改数据甚至完全控制数据库。

以下是一个简单的示例，说明SQL注入攻击的工作原理：

假设有一个登录页面，用户通过输入用户名和密码进行身份验证，后台代码使用输入的用户名和密码执行SQL查询来验证用户是否合法。后台代码可能类似于以下示例：

```javascript
const username = request.getParameter("username");
const password = request.getParameter("password");
const query = "SELECT * FROM users WHERE username='" + username + "' AND password='" + password + "'";
```

在正常情况下，用户名和密码将被正确地组合成SQL查询语句。但是，如果攻击者在用户名输入框中输入了恶意的SQL代码，例如 `' OR '1'='1`，那么最终的查询语句将变成：

```sql
SELECT * FROM users WHERE username='' OR '1'='1' AND password='...'
```

**这个查询语句中的 `'1'='1'` 总是为真，所以即使密码不正确，也会返回用户的数据。攻击者就可以绕过身份验证，获取其他用户的敏感信息。**

为了防止SQL注入攻击，应该使用**参数化查询或预编译语句来处理用户输入的数据。这样可以确保输入的数据被正确地转义和处理**，从而防止恶意代码的注入。此外，还应该对用户输入进行严格的验证和过滤，确保只接受符合预期格式的数据。

