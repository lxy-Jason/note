HTTP/2可以解决http队首阻塞问题,但是TCP层面的队首阻塞是HTTP/2无法阻塞的

HTTP是应用层协议,TCP是传输层协议

**TCP的阻塞问题是因为传输阶段可能会丢包.TCP是一个按序传输的通道,一旦丢包就会等待重新发包,阻塞后续内容传输**

采用HTTP/2时,浏览器一般会在单个TCP的连接中创建并行的几十个乃至上百个传输

如果HTTP/2连接双方的网络中有一个数据包丢失,或者任何一方的网络出现中断,整个TCP连接就会暂停,丢失的数据包需要重新传输

随着丢包率的增加,HTTP/2的表现越来越差

TCP在不可靠的信道上实现了可靠的网络传输,但实现TCP的种种机制会导致额外的延迟,对性能造成负面影响

每个TCP分组都会带着一个唯一的序号被发出,而所有分组必须按顺序传送给接收端

如果中途有一个分组没能到达接收端,那么**后续分组必须保存在接收端的TCP缓冲区上,等待丢失的分组重发并到达接收端**

这就是TCP的队首阻塞

### 如何解决

- TCP中的队头阻塞的产生是由TCP自身的实现机制决定的,无法避免
- 使用quic协议,因为这个不使用TCP协议,而是在UDP协议的基础上实现可靠传输
- 还有个SCTP(流控制传输协议),它和TCP,UDP是同一层次的传输协议