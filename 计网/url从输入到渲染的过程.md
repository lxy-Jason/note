### 缓存检查

浏览器在发送请求之前先检查有没有缓存

浏览器会先去查看强缓存(`Expires`和`cache-control`字段)判断是否过期,强缓存生效,则直接从缓存中读取资源

### 应用层进行DNS解析

通过DNS解析获取IP地址,DNS协议运行在UDP协议之上

在解析过程中按照如下顺序,逐步查找IP地址

- 浏览器缓存
- 系统缓存(本地hosts文件)
- 路由器缓存
- ISP(运营商)DNS缓存(本地DNS)
- 根域名服务器(全球13台)

​		这里不会直接拿到目标服务器的IP地址,只会得到其对应的顶级域名服务器的地址

- 顶级域名服务器

​		如上,只能得到主域名的服务器地址

- 主域名服务器(.com域)

  在这里可以得到目标服务器的地址,然后返回给本地DNS,本地DNS会做一次缓存,以备再次使用,再返回给浏览器,浏览器也会缓存一份

### 传输层建立TCP连接

### 服务器响应请求

这里如果进行了协商缓存(`Last-Modified/If-Modified-Since`和`Etag/If-None-Match`

协商缓存由服务器决定是否使用缓存,若协商缓存失效,返回200,重新获取资源

生效则返回304,使用缓存的资源

### 浏览器解析并渲染响应内容

1. 浏览器拿到资源(一些字节码)后,通过编码方式(一般是utf-8)转换成对应的字符
2. 从上到下解析文档,遇到HTML标签,调用HTML解析成dom树
3. 遇到css,调用css解析器解析成CSSOM树
4. script,js的解析
5. dom树和cssom树合成一颗render树
6. 根据render树渲染



